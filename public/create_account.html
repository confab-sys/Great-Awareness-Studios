<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Account</title>
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        body {
            background-color: #D3E4DE;
            min-height: 100vh;
            width: 100%;
            font-family: 'Public Sans', sans-serif;
            padding: 40px;
        }
        .header-text {
            font-weight: bold;
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
        }
        .page-title {
            font-weight: bold;
            font-size: 48px;
            color: #333;
            line-height: 1.2;
            margin-bottom: 40px;
        }
        .content-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
        }
        .form-container {
            background: #D3E4DE;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #E42F45;
            color: #000;
        }
        .form-group input:focus {
            outline: none;
            border-color: #007BFF;
        }
        .create-account-button {
            width: 100%;
            padding: 15px;
            background-color: #E42F45;
            color: #000;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 18px;
            font-family: 'Public Sans', sans-serif;
            font-weight: bold;
            margin-top: 20px;
        }
        .create-account-button:hover {
            background-color: #B22439;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@700&display=swap" rel="stylesheet">
  
</head>
<body>
    <div class="header-text">Great Awareness</div>
    <div class="page-title">Not Yet A Member? Create Account</div>
    
    <div class="content-container">
        <div class="form-container">
            <form>
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="mobile">Mobile Number</label>
                    <input type="tel" id="mobile" name="mobile" required>
                </div>
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="location">County</label>
                    <select id="location" name="location" required style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; background-color: #E42F45; color: #000;">
                        <option value="">Select your county</option>
                        <option value="Baringo">Baringo</option>
                        <option value="Bomet">Bomet</option>
                        <option value="Bungoma">Bungoma</option>
                        <option value="Busia">Busia</option>
                        <option value="Elgeyo-Marakwet">Elgeyo-Marakwet</option>
                        <option value="Embu">Embu</option>
                        <option value="Garissa">Garissa</option>
                        <option value="Homa Bay">Homa Bay</option>
                        <option value="Isiolo">Isiolo</option>
                        <option value="Kajiado">Kajiado</option>
                        <option value="Kakamega">Kakamega</option>
                        <option value="Kericho">Kericho</option>
                        <option value="Kiambu">Kiambu</option>
                        <option value="Kilifi">Kilifi</option>
                        <option value="Kirinyaga">Kirinyaga</option>
                        <option value="Kisii">Kisii</option>
                        <option value="Kisumu">Kisumu</option>
                        <option value="Kitui">Kitui</option>
                        <option value="Kwale">Kwale</option>
                        <option value="Laikipia">Laikipia</option>
                        <option value="Lamu">Lamu</option>
                        <option value="Machakos">Machakos</option>
                        <option value="Makueni">Makueni</option>
                        <option value="Mandera">Mandera</option>
                        <option value="Marsabit">Marsabit</option>
                        <option value="Meru">Meru</option>
                        <option value="Migori">Migori</option>
                        <option value="Mombasa">Mombasa</option>
                        <option value="Muranga">Muranga</option>
                        <option value="Nairobi">Nairobi</option>
                        <option value="Nakuru">Nakuru</option>
                        <option value="Nandi">Nandi</option>
                        <option value="Narok">Narok</option>
                        <option value="Nyamira">Nyamira</option>
                        <option value="Nyandarua">Nyandarua</option>
                        <option value="Samburu">Samburu</option>
                        <option value="Siaya">Siaya</option>
                        <option value="Taita–Taveta">Taita–Taveta</option>
                        <option value="Tana River">Tana River</option>
                        <option value="Tharaka-Nithi">Tharaka-Nithi</option>
                        <option value="Trans-Nzoia">Trans-Nzoia</option>
                        <option value="Turkana">Turkana</option>
                        <option value="Uasin Gishu">Uasin Gishu</option>
                        <option value="Vihiga">Vihiga</option>
                        <option value="Wajir">Wajir</option>
                        <option value="West Pokot">West Pokot</option>
                    </select>
                </div>
            </form>
        </div>
        <button class="create-account-button" id="submitBtn">Join Community</button>
       
    </div>

    <!-- Firebase Configuration and Form Handling -->
    <script type="module">
        // ADD THESE IMPORTS HERE
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js';
        import { getFirestore, collection, addDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDLeIOTXOQ5pY2R5ZrdnLSTGNpEO1buw0k",
            authDomain: "great-awareness-studio.firebaseapp.com",
            projectId: "great-awareness-studio",
            storageBucket: "great-awareness-studio.firebasestorage.app",
            messagingSenderId: "999019465651",
            appId: "1:999019465651:web:3e8b5ab1cd0fa74dc219c6",
            measurementId: "G-9J2PG61TW7"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Form submission function
        async function submitForm() {
            console.log('submitForm function called!'); // Debug log
            
            const name = document.getElementById('name').value;
            const mobile = document.getElementById('mobile').value;
            const email = document.getElementById('email').value;
            const location = document.getElementById('location').value;

            console.log('Form data:', { name, mobile, email, location }); // Debug log

            // Basic validation
            if (!name || !mobile || !email || !location) {
                alert('Please fill in all fields');
                return;
            }

            try {
                console.log('Attempting to add document to Firestore...'); // Debug log
                
                // Add document to Firestore
                const docRef = await addDoc(collection(db, 'users'), {
                    name: name,
                    mobile: mobile,
                    email: email,
                    location: location,
                    createdAt: serverTimestamp()
                });

                console.log('Document written with ID: ', docRef.id); // Debug log
                alert('Account created successfully! Welcome to the Great Awareness community!');
                
                // Clear form
                document.getElementById('name').value = '';
                document.getElementById('mobile').value = '';
                document.getElementById('email').value = '';
                document.getElementById('location').value = '';

            } catch (error) {
                console.error('Error creating account: ', error);
                alert('Error creating account: Please check console for details. Error: ' + error.message);
            }
        }

        // Wait for everything to load, then add event listeners
        window.addEventListener('load', function() {
            console.log('Page loaded, adding event listeners...'); // Debug log
            
            // Add event listener to the submit button
            const submitBtn = document.getElementById('submitBtn');
            if (submitBtn) {
                submitBtn.addEventListener('click', submitForm);
                console.log('Event listener added to submit button'); // Debug log
                
                // Test if button is clickable
                submitBtn.style.border = '2px solid green'; // Visual confirmation
            } else {
                console.error('Submit button not found!'); // Debug log
            }
            
            // Add event listener to the back button
            const backBtn = document.getElementById('backBtn');
            if (backBtn) {
                backBtn.addEventListener('click', function() {
                    window.location.href = 'welcome_page.html';
                });
                console.log('Event listener added to back button'); // Debug log
            }
        });
    </script>
</body>
</html>